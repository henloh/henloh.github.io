/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/changeHandler/common/revertAddedControls","sap/ui/fl/changeHandler/common/getTargetAggregationIndex","sap/ui/fl/changeHandler/common/createIFrame"],function(e,t,n){"use strict";var r={};r.applyChange=function(e,r,o){var a=o.modifier;var i=e.getContent();var g=o.view;var c=i.targetAggregation;var s;var f;return Promise.resolve().then(a.findAggregation.bind(a,r,c)).then(function(n){if(!n){throw new Error("The given Aggregation is not available in the given control: "+a.getId(r))}return t(e,r,o)}).then(function(t){s=t;return n(e,o,i.selector)}).then(function(e){f=e;return a.insertAggregation(r,c,f,s,g)}).then(function(){e.setRevertData([a.getId(f)])})};r.revertChange=e;r.completeChangeContent=function(e,t,n){var r=n.modifier;var o=n.appComponent;["targetAggregation","baseId","url"].forEach(function(e){if(!Object.prototype.hasOwnProperty.call(t.content,e)){throw new Error("Attribute missing from the change specific content '"+e+"'")}});var a=Object.assign({},t.content);a.selector=r.getSelector(a.baseId,o);e.setContent(a)};r.getChangeVisualizationInfo=function(e){return{affectedControls:[e.getContent().selector]}};return r},true);